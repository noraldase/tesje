<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Nickname HidupCuan</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; padding: 50px; background: #eceff1; }
        .container { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 350px; text-align: center; }
        h2 { color: #333; margin-bottom: 20px; font-size: 1.2rem; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1rem; }
        button { width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        button:hover { background: #0056b3; }
        button:disabled { background: #ccc; }
        #displayName { margin-top: 25px; padding: 15px; border-radius: 8px; background: #f8f9fa; display: none; border: 1px dashed #007bff; }
        .label { font-size: 0.8rem; color: #666; text-transform: uppercase; margin-bottom: 5px; display: block; }
        .nickname { font-size: 1.4rem; font-weight: bold; color: #007bff; word-break: break-all; }
        .error { color: #d9534f; margin-top: 15px; font-size: 0.9rem; font-weight: 500; }
    </style>
</head>
<body>

<div class="container">
    <h2>Pengecekan User</h2>
    <input type="number" id="inputID" placeholder="Masukkan Player ID..." oninput="clearError()">
    <button id="btnCheck" onclick="fetchNickname()">Cek Sekarang</button>

    <div id="displayName">
        <span class="label">Nama Player:</span>
        <div class="nickname" id="nickResult"></div>
    </div>
    
    <div id="errorMsg" class="error"></div>
</div>

<script>
async function fetchNickname() {
    const playerID = document.getElementById('inputID').value;
    const btn = document.getElementById('btnCheck');
    const displayDiv = document.getElementById('displayName');
    const nickResult = document.getElementById('nickResult');
    const errorDiv = document.getElementById('errorMsg');

    if (!playerID) {
        errorDiv.innerText = "Masukkan ID dulu, Bos!";
        return;
    }

    // Reset UI
    errorDiv.innerText = "";
    displayDiv.style.display = "none";
    btn.disabled = true;
    btn.innerText = "Mengecek...";

    try {
        const response = await fetch('https://open-api.hidupcuan.org/api/player/get', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            // Payload disesuaikan dengan log yang kamu kirim (PlayerID pakai huruf besar semua di akhir)
            body: JSON.stringify({
                "PlayerID": playerID.toString()
            })
        });

        const result = await response.json();
        console.log("Full Response:", result); // Tetap log semua data di console (F12)

        if (result.status === "success" && result.data) {
            nickResult.innerText = result.data.Nick;
            displayDiv.style.display = "block";
        } else {
            errorDiv.innerText = "ID tidak ditemukan. Periksa kembali ID-nya.";
        }
    } catch (err) {
        errorDiv.innerText = "Terjadi gangguan koneksi atau masalah CORS.";
        console.error("Error Detail:", err);
    } finally {
        btn.disabled = false;
        btn.innerText = "Cek Sekarang";
    }
}

function clearError() {
    document.getElementById('errorMsg').innerText = "";
}
</script>

</body>
</html>
